{"version":3,"sources":["components/CellComp/CellComp.tsx","components/FieldComp/FieldComp.tsx","components/MenuComp/MenuComp.tsx","components/GameComp/GameComp.tsx","reportWebVitals.ts","stores/Cell.ts","stores/Row.ts","stores/Field.ts","stores/GameStore.ts","index.tsx"],"names":["CellComp","props","className","isActive","onClick","FieldComp","observer","game","useContext","StoresContext","field","rows","map","row","rowIdx","cells","cell","cellIdx","active","onCellClick","MenuComp","isArrowEvent","evt","key","startsWith","stepsAmount","rowAmount","colAmount","type","min","max","step","value","onChange","onRowAmount","target","valueAsNumber","setColAmount","onMouseDown","onColCtrlDown","onMouseUp","onColCtrlUp","onKeyDown","onKeyUp","checked","flipTargetCell","onFlipTargetCell","onRandomize","window","alert","GameComp","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Cell","makeObservable","this","observable","Math","random","action","Row","Field","init","lo","Array","invertCellState","every","length","invert","GameStore","v","invertAreaState","isWin","prevColAmount","configure","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","rootStore","React","createContext","ReactDOM","render","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.eccd7e1b.chunk.js","sourcesContent":["import 'components/CellComp/CellComp.scoped.scss';\r\n\r\ninterface Props {\r\n  isActive: boolean;\r\n  onClick: (cellIdx?: number, rowIdx?: number) => void;\r\n}\r\n\r\nexport function CellComp(props: Props) {\r\n  return (\r\n    <button\r\n      className={`CellComp ${props.isActive ? 'active' : ''}`}\r\n      onClick={() => {\r\n        props.onClick();\r\n      }}\r\n    />\r\n  );\r\n};\r\n","import { CellComp } from 'components/CellComp/CellComp';\r\nimport 'components/FieldComp/FieldComp.scoped.scss';\r\nimport { StoresContext } from 'index';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { useContext } from 'react';\r\n\r\nexport const FieldComp = observer(function FieldComp() {\r\n  const game = useContext(StoresContext).game;\r\n\r\n  return (\r\n    <div className='FieldComp'>\r\n      <table>\r\n        <tbody>{renderRows()}</tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  function renderRows(): JSX.Element[] {\r\n    return game.field.rows.map((row, rowIdx) => {\r\n      return (\r\n        <tr key={'tr' + rowIdx}>\r\n          {row.cells.map((cell, cellIdx) => {\r\n            return (\r\n              <td key={'td' + cellIdx + rowIdx}>\r\n                <CellComp\r\n                  key={'cell' + cellIdx + rowIdx}\r\n                  isActive={cell.active}\r\n                  onClick={() => {\r\n                    game.onCellClick(cellIdx, rowIdx);\r\n                  }}\r\n                />\r\n              </td>\r\n            );\r\n          })}\r\n        </tr>\r\n      );\r\n    });\r\n  }\r\n});\r\n","import 'components/MenuComp/MenuComp.scoped.scss';\r\nimport { StoresContext } from 'index';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { useContext } from 'react';\r\n\r\nexport const MenuComp = observer(function MenuComp() {\r\n  const game = useContext(StoresContext).game;\r\n\r\n  function showAbout() {\r\n    window.alert(\r\n      'Small puzzle game.\\n' +\r\n        'To win, mark all cells green.\\n' +\r\n        'Click on the cell will invert colors of all neighbors except for diagonals.'\r\n    );\r\n  }\r\n\r\n  function isArrowEvent(evt: React.KeyboardEvent) {\r\n    return evt.key.startsWith('Arrow');\r\n  }\r\n\r\n  return (\r\n    <div className='MenuComp'>\r\n      <div>\r\n        <p>steps counter: {game.stepsAmount}</p>\r\n      </div>\r\n\r\n      <div>\r\n        <p>\r\n          field size: {game.rowAmount} x {game.colAmount}\r\n        </p>\r\n        <label>\r\n          rows:\r\n          <input\r\n            type=\"range\"\r\n            min=\"1\"\r\n            max=\"9\"\r\n            step=\"1\"\r\n            value={game.rowAmount}\r\n            onChange={(evt) => {\r\n              game.onRowAmount(evt.target.valueAsNumber);\r\n            }}\r\n          />\r\n        </label>\r\n        <label>\r\n          columns:\r\n          <input\r\n            type=\"range\"\r\n            min=\"1\"\r\n            max=\"9\"\r\n            step=\"1\"\r\n            value={game.colAmount}\r\n            onChange={(evt) => {\r\n              game.setColAmount(evt.target.valueAsNumber);\r\n            }}\r\n            onMouseDown={() => {\r\n              game.onColCtrlDown();\r\n            }}\r\n            onMouseUp={() => {\r\n              game.onColCtrlUp();\r\n            }}\r\n            onKeyDown={(evt) => {\r\n              if (isArrowEvent(evt)) {\r\n                game.onColCtrlDown();\r\n              }\r\n            }}\r\n            onKeyUp={(evt) => {\r\n              if (isArrowEvent(evt)) {\r\n                game.onColCtrlUp();\r\n              }\r\n            }}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div>\r\n        <label>\r\n          change clicked cell:\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={game.flipTargetCell}\r\n            onChange={(evt) => {\r\n              game.onFlipTargetCell(evt.target.checked);\r\n            }}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div>\r\n        <button\r\n          onClick={() => {\r\n            game.onRandomize();\r\n          }}\r\n        >\r\n          randomize field\r\n        </button>\r\n      </div>\r\n\r\n      <div>\r\n        <button onClick={showAbout}>about</button>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n","import { FieldComp } from 'components/FieldComp/FieldComp';\r\nimport 'components/GameComp/GameComp.scoped.scss';\r\nimport { MenuComp } from 'components/MenuComp/MenuComp';\r\n\r\nexport function GameComp() {\r\n  return (\r\n    <div className='GameComp'>\r\n      <FieldComp />\r\n      <MenuComp />\r\n    </div>\r\n  );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { action, makeObservable, observable } from 'mobx';\r\n\r\nexport class Cell {\r\n  @observable active = Math.random() >= 0.5;\r\n\r\n  constructor() {\r\n    makeObservable(this);\r\n  }\r\n\r\n  @action\r\n  invert() {\r\n    this.active = !this.active;\r\n  }\r\n}\r\n","import { Cell } from 'stores/Cell';\r\n\r\nexport class Row {\r\n  cells: Cell[];\r\n\r\n  constructor(cells: Cell[]) {\r\n    this.cells = cells;\r\n  }\r\n}\r\n","import lo from 'lodash';\r\nimport { action, makeObservable, observable } from 'mobx';\r\nimport { Cell } from 'stores/Cell';\r\nimport { Row } from 'stores/Row';\r\n\r\nexport class Field {\r\n  @observable rows: Row[] = [];\r\n\r\n  constructor(colAmount: number, rowAmount: number) {\r\n    makeObservable(this);\r\n    this.init(colAmount, rowAmount);\r\n  }\r\n\r\n  @action\r\n  init(colAmount: number, rowAmount: number) {\r\n    this.rows = lo.map(Array(rowAmount), () => {\r\n      return new Row(\r\n        lo.map(Array(colAmount), () => {\r\n          return new Cell();\r\n        })\r\n      );\r\n    });\r\n  }\r\n\r\n  @action\r\n  invertAreaState(cellIdx: number, rowIdx: number, flipTargetCell: boolean) {\r\n    if (flipTargetCell) {\r\n      this.invertCellState(cellIdx, rowIdx);\r\n    }\r\n\r\n    this.invertCellState(cellIdx - 1, rowIdx);\r\n    this.invertCellState(cellIdx + 1, rowIdx);\r\n    this.invertCellState(cellIdx, rowIdx - 1);\r\n    this.invertCellState(cellIdx, rowIdx + 1);\r\n  }\r\n\r\n  isWin(): boolean {\r\n    return this.rows.every((row) => {\r\n      return row.cells.every((cell) => {\r\n        return cell.active;\r\n      });\r\n    });\r\n  }\r\n\r\n  @action\r\n  private invertCellState(cellIdx: number, rowIdx: number) {\r\n    if (\r\n      rowIdx >= 0 &&\r\n      cellIdx >= 0 &&\r\n      rowIdx < this.rows.length &&\r\n      cellIdx < this.rows[rowIdx].cells.length\r\n    ) {\r\n      this.rows[rowIdx].cells[cellIdx].invert();\r\n    }\r\n  }\r\n}\r\n","import { action, makeObservable, observable } from 'mobx';\r\nimport { Field } from 'stores/Field';\r\n\r\nexport class GameStore {\r\n  @observable prevColAmount = 0;\r\n  @observable colAmount = 6;\r\n  @observable rowAmount = 1;\r\n  @observable flipTargetCell = false;\r\n  @observable stepsAmount = 0;\r\n\r\n  field = new Field(this.colAmount, this.rowAmount);\r\n\r\n  constructor() {\r\n    makeObservable(this);\r\n  }\r\n\r\n  @action\r\n  setColAmount(v: number) {\r\n    this.colAmount = v;\r\n  }\r\n\r\n  @action\r\n  onCellClick(cellIdx: number, rowIdx: number) {\r\n    this.field.invertAreaState(cellIdx, rowIdx, this.flipTargetCell);\r\n    this.stepsAmount++;\r\n    if (this.field.isWin()) {\r\n      window.alert(`You won in ${this.stepsAmount} steps!`);\r\n      this.field.init(this.colAmount, this.rowAmount);\r\n      this.stepsAmount = 0;\r\n    }\r\n  }\r\n\r\n  @action\r\n  onRowAmount(v: number) {\r\n    this.rowAmount = v;\r\n    this.field.init(this.colAmount, this.rowAmount);\r\n    this.stepsAmount = 0;\r\n  }\r\n\r\n  @action\r\n  onFlipTargetCell(v: boolean) {\r\n    this.flipTargetCell = v;\r\n    this.field.init(this.colAmount, this.rowAmount);\r\n    this.stepsAmount = 0;\r\n  }\r\n\r\n  @action\r\n  onColCtrlDown() {\r\n    this.prevColAmount = this.colAmount;\r\n  }\r\n\r\n  @action\r\n  onColCtrlUp() {\r\n    if (this.colAmount === this.prevColAmount) {\r\n      return;\r\n    }\r\n    this.field.init(this.colAmount, this.rowAmount);\r\n    this.stepsAmount = 0;\r\n  }\r\n\r\n  @action\r\n  onRandomize() {\r\n    this.field.init(this.colAmount, this.rowAmount);\r\n    this.stepsAmount = 0;\r\n  }\r\n}\r\n","import { GameComp } from 'components/GameComp/GameComp';\r\nimport 'index.scss';\r\nimport { configure } from 'mobx';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reportWebVitals from 'reportWebVitals';\r\nimport { GameStore } from 'stores/GameStore';\r\n\r\nconfigure({\r\n  enforceActions: 'always',\r\n  computedRequiresReaction: true,\r\n  reactionRequiresObservable: true,\r\n  observableRequiresReaction: true,\r\n  disableErrorBoundaries: true,\r\n});\r\n\r\nconst rootStore = {\r\n  game: new GameStore(),\r\n};\r\nexport const StoresContext = React.createContext(rootStore);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <StoresContext.Provider value={rootStore}>\r\n      <GameComp />\r\n    </StoresContext.Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}